"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}if(document.addEventListener("DOMContentLoaded",(function(){if($((function(){$(".x3-tmenu__icon").click((function(){$(".x3-tmenu__wrap").addClass("x3-tmenu__wrap--open")})),$(".x3-tmenu__close").click((function(){$(".x3-tmenu__wrap").removeClass("x3-tmenu__wrap--open")})),$(document).on("click",".x3-tmenu__wrap--open > ul > li > a",(function(){if(0!=$(this).not(".root-item").length)return $(this).toggleClass("open"),$(this).next("ul").slideToggle(),!1}))})),$((function(){$(".x3-search__icon").click((function(){$(".x3-search-panel").addClass("x3-search-panel--show"),$(".x3-search-panel input[type='text']").focus()})),$(".x3-search-panel__close").click((function(){$(".x3-search-panel").removeClass("x3-search-panel--show")})),$(document).keyup((function(e){"Escape"===e.key&&$(".x3-search-panel").hasClass("x3-search-panel--show")&&$(".x3-search-panel").removeClass("x3-search-panel--show")}))})),document.querySelector(".site-wrap").classList.add("dom-loaded"),$(".filter-toggle").length>0){jcf.replaceAll();var e=document.querySelectorAll(".filter-toggle");window.addEventListener("click",(function(t){t.target.closest(".filter-popup")||e.forEach((function(e,n){e.contains(t.target)||e.classList.remove("is-button-active")}))})),e.forEach((function(e,t){e.addEventListener("click",(function(e){e.preventDefault(),e.target.closest(".filter-toggle").classList.toggle("is-button-active")}))})),document.querySelectorAll(".filter-checbox-item").forEach((function(e,t){e.addEventListener("click",(function(e){var t=e.target.closest(".filter-popup"),n=t.querySelectorAll('input[type="checkbox"]:checked').length,r=t.closest(".filter-title"),o=r.querySelector(".filter-count-selected");n>0?(o.innerHTML=n,r.classList.add("is-active")):(o.innerHTML="",r.classList.remove("is-active"))}))})),document.querySelectorAll(".filter-apply").forEach((function(e,t){e.addEventListener("click",(function(e){e.target.closest(".filter-title").querySelector(".filter-toggle").classList.toggle("is-button-active")}))}))}if($(".iso-filter").length>0){$((function(){var e=$(".event-list"),t=$(".iso-filter").on("click",".iso-filter__btn",(function(){var e=$(this).attr("data-filter");location.hash="filter="+encodeURIComponent(e)})),n=!0;function r(){var r=function(){location.hash;var e=location.hash.match(/filter=([^&]+)/i),t=e&&e[1];return t&&decodeURIComponent(t)}();if("*"===r)return e.isotope({itemSelector:".event-list__item",filter:r}),t.find(".is-checked").removeClass("is-checked"),t.find('[data-filter="*"]').addClass("is-checked"),void history.pushState("",document.title,window.location.pathname+window.location.search);!r&&n||(n=!0,e.isotope({itemSelector:".event-list__item",filter:"."+r}),r&&(t.find(".is-checked").removeClass("is-checked"),t.find('[data-filter="'+r+'"]').addClass("is-checked")))}$(window).on("hashchange",r),r()}))}if($("#calendar").length>0){moment.locale("ru");var t=moment().format("YYYY-MM"),n=[{title:"Multi-Day Event",endDate:t+"-14",startDate:t+"-10"},{endDate:t+"-23",startDate:t+"-21",title:"Another Multi-Day Event"},{date:t+"-21",title:"Single Day Event"},{date:t+"-07",title:"Single Day Event"},{date:t+"-11",title:"Single Day Event"}];$("#calendar").clndr({events:n,clickEvents:{click:function(e){console.log("Calendar clicked: ",e)},today:function(){console.log("Calendar today")},nextMonth:function(){console.log("Calendar next month")},previousMonth:function(){console.log("Calendar previous month")},onMonthChange:function(){console.log("Calendar month changed")},nextYear:function(){console.log("Calendar next year")},previousYear:function(){console.log("Calendar previous year")},onYearChange:function(){console.log("Calendar year changed")},nextInterval:function(){console.log("Calendar next interval")},previousInterval:function(){console.log("Calendar previous interval")},onIntervalChange:function(){console.log("Calendar interval changed")}},template:$("#template-calendar").html()})}($(".bubble_card").length>0&&(document.querySelector(".bubble_card__close").addEventListener("click",(function(e){e.target.closest(".bubble_card").classList.add("is-closed")})),window.addEventListener("scroll",(function(){document.querySelector(".bubble_card").classList.toggle("is-scrolled",window.scrollY>300)}))),$(".popup-with-zoom-anim").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in"}),$(".js-tabs-controls").length>0)&&document.querySelectorAll(".tabs-close-btn").forEach((function(e,t){e.addEventListener("click",(function(e){e.target.closest(".tabs-item").querySelector(".js-accordion-item").click()}))}));if(document.querySelector(".audio-player")){var r=[{title:"80s Vibe",file:"80s_vibe",howl:null}],o=[],i=document.querySelectorAll(".tabs-item");i.length>0&&i.forEach((function(e,t){var n=t+1,i=document.getElementById("tab-media-"+n);if(i){var a,l=_createForOfIteratorHelper(i.children);try{for(l.s();!(a=l.n()).done;){var c=a.value;if("AUDIO"===c.tagName)r.push({title:"audio in tab "+n,file:c.currentSrc,howl:null});else{var s=c.getAttribute("src"),u=c.getAttribute("srcdomain");console.log(s),e.classList.add("is-"+u+"-tab"),o.push(n)}}}catch(e){l.e(e)}finally{l.f()}}}));var a=new Player(r);$(".js-tabs-controls").dataTabs({event:"click",initOpenTab:!1,state:"accordion",jqMethodOpen:"slideDown",jqMethodClose:"slideUp",onTab:function(e,t,n){var r=e.$targets[e.states.activeIndex].classList.contains("is-tab-active");if(void 0===o.find((function(t){return t===e.states.activeIndex+1}))){if(a.pause(),r){var i=$(".audio-tours__tabs iframe"),l=i[0].getAttribute("src");console.log(i);var c=l.split("?")[0];console.log(c),i[0].setAttribute("src",c+"?&amp;autoplay=0"),a.play(e.states.activeIndex+1)}}else{a.pause();var s=n.find("IFRAME");l=s[0].getAttribute("src");console.log(l);c=l.split("?")[0];console.log(c),r?s[0].setAttribute("src",c+"?si=fDHed4vNyCrfZOGD&amp;autoplay=1"):s[0].setAttribute("src",c+"?&amp;autoplay=0")}}})}if($(".image-slider").length>0){var l=function(e){var t=e.realIndex+1,n=e.el.querySelectorAll(".swiper-slide").length;$(".swiper-active-slide").text(t),$(".swiper-count-slides").text(n),$(".swiper-count-total").text(n)};new Swiper(".image-slider",{speed:1e3,autoplay:!0,pauseOnMouseEnter:!0,effect:"fade",lazy:!0,slidesPerView:1,spaceBetween:100,loop:!0,slidesPerGroupSkip:1,scrollbar:{el:".image-slider .swiper-scrollbar"},pagination:{el:".image-slider .swiper-fractions",type:"fraction"},navigation:{nextEl:".image-slider .swiper-button-next",prevEl:".image-slider .swiper-button-prev"},on:{init:function(){l(this)}}}).on("slideChange",(function(){l(this)}))}if($(".gallery-slider").length>0){l=function(e){var t=e.realIndex+1,n=e.el.querySelectorAll(".swiper-slide").length;$(".swiper-active-slide").text(t),$(".swiper-count-slides").text(n),$(".swiper-count-total").text(n)};new Swiper(".gallery-slider",{speed:1e3,lazy:!0,slidesPerView:"auto",spaceBetween:30,loop:!1,scrollbar:{el:".gallery-slider .swiper-scrollbar"},pagination:{el:".gallery-slider .swiper-fractions",type:"fraction"},navigation:{nextEl:".gallery-slider .swiper-button-next",prevEl:".gallery-slider .swiper-button-prev"},on:{init:function(){l(this)}}}).on("slideChange",(function(){l(this)}))}if($("#mmenu").length>0){var c=new MmenuLight(document.querySelector("#mmenu"),"(max-width: 900px)"),s=(c.navigation({}),c.offcanvas({}));document.querySelector("a[href='#mmenu']").addEventListener("click",(function(e){e.preventDefault(),s.open()})),document.querySelector(".btn-close").addEventListener("click",(function(e){e.preventDefault(),s.close()})),c.menu.setAttribute("data-mm-spn-title","Фильтр"),$(".js-mm-filter").dataTabs({event:"click",initOpenTab:!1,state:"accordion",jqMethodOpen:"slideDown",jqMethodClose:"slideUp",onTab:function(e,t,n){}})}})),$("#js-historical__line").length>0){var createElemsTooltip=function(e,t,n){var r=document.createElement("div"),o=r.cloneNode(),i=document.createElement("div"),a=n.getBoundingClientRect(),l="point_"+n.getAttribute("place_number");return i.appendChild(document.createTextNode(n.getAttribute("place_number"))),r.appendChild(i),o.appendChild(r),o.style.width=a.width+10+"px",o.style.height=a.height+10+"px",o.style.left=a.left-t-5+"px",o.style.top=a.top-e-5+"px",i.classList.add("duplicate_point"),r.classList.add("duplicate_point_wrapp"),r.setAttribute("place_name",n.getAttribute("place_name")),o.classList.add("duplicate_point_el","historical_line_point",l),o.setAttribute("data-point-id",n.getAttribute("place_number")),o},recalcElemsTooltip=function(e,t,n){var r=n.getBoundingClientRect(),o=$("[data-point-id="+n.getAttribute("place_number")+"]");o.css("left",r.left-t-5),o.css("top",r.top-e-5)},mapSizesCheck=function(){return window.innerWidth<640?{h:390,w:987}:window.innerWidth<920?{h:500,w:1267}:{h:$(".historical_line_map").height(),w:$(".historical_line_map").width()}},calcImageSize=function(e,t,n,r){var o=mapSizesCheck(),i=t/100,a=n/(e/100)*(o.w/100),l=r/i*(o.h/100);$(".historical_line_svg").attr({width:a,height:l})},place_preview=function(e){return{place_group:e.cloneNode(!0)}},place_common=function(e,t){return t.place_group.setAttribute("data-place-id",e.getAttribute("data-point-id")),{point:e,preview:t}};document.addEventListener("DOMContentLoaded",(function(){if(calcImageSize(1920,762,1026,762),$(window).on("resize",(function(){calcImageSize(1920,762,1026,762);var e=document.querySelectorAll(".svg_line_point"),t=document.querySelector(".svg_animate"),n=t.getBoundingClientRect().top,r=t.getBoundingClientRect().left;e.forEach((function(e){return recalcElemsTooltip(n,r,e)}))})),$("#js-historical__line").length>0){var e=new Vivus("js-historical__line",{type:"scenario",start:"manual",delay:0,duration:130,onReady:function(e){var t=document.querySelectorAll(".svg_line_point"),n=document.querySelector(".svg_animate"),r=n.getBoundingClientRect().top,o=n.getBoundingClientRect().left;t.forEach((function(e){return n.appendChild(createElemsTooltip(r,o,e))})),tippy(".duplicate_point_wrapp",{animation:"scale-subtle",placement:"right",hideOnClick:!1,interactive:!0,allowHTML:!0,maxWidth:"",content:function(e){return'<a href="#"><span class="ttip-text">'+e.getAttribute("place_name")+'</span><svg aria-hidden="true" width="20" height="16"> <use xlink:href="#arrow-right4"></use> </svg></a>'}})}},(function(e){}));gsap.registerPlugin(ScrollTrigger),$(window).on("onbeforeunload",(function(){scrollTrigger.clearScrollMemory(),window.history.scrollRestoration="manual"}));var t=[];_toConsumableArray(document.querySelectorAll(".historical_place__group")).forEach((function(e){return t.push(place_preview(e))}));var n=[];_toConsumableArray(document.querySelectorAll(".historical_line_point")).forEach((function(e,r){return n.push(place_common(e,t[r]))})),n.forEach((function(e){var t=e.preview.place_group.getAttribute("data-place-id");null===e.preview.place_group.viewportElement&&("2"===t?(document.getElementById("zoom_viewBox").appendChild(e.preview.place_group),gsap.to(e.preview.place_group,{duration:.7,ease:"expo",scale:0,transformOrigin:"50% 50%"})):(document.getElementById("js-historical__line").prepend(e.preview.place_group),gsap.to(e.preview.place_group,{duration:.7,ease:"expo",scale:0,transformOrigin:"50% 50%"})));e.point.addEventListener("click",(function(t){console.log(e.point.getAttribute("data-point-id"))})),e.point.addEventListener("mouseenter",(function(n){(e.point.classList.add("active-play"),e.preview.place_group.classList.add("place_hovered"),"2"===t)&&document.querySelector(".zoom_container").classList.add("zoom-active");gsap.killTweensOf(e.preview.place_group),gsap.to(e.preview.place_group,{opacity:1,duration:.7,ease:"expo",scale:1,transformOrigin:"50% 50%"})})),e.point.addEventListener("mouseleave",(function(n){(e.point.classList.remove("active-play"),e.preview.place_group.classList.remove("place_hovered"),"2"===t)&&document.querySelector(".zoom_container").classList.remove("zoom-active");gsap.killTweensOf(e.preview.place_group),gsap.to(e.preview.place_group,{opacity:0,duration:.7,ease:"expo",scale:0,transformOrigin:"50% 50%"})}))})),gsap.to("#js-historical__line",{scrollTrigger:{trigger:".historical_line_svg",start:"10% bottom",once:!0,onToggle:function(t){t.trigger.parentNode.classList.add("animation-started"),e.play()}}})}}))}